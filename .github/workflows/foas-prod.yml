name: 'Federated Open API Specifiction Release Process (PROD)'
on:
  workflow_dispatch: {}
  schedule:
    - cron: '0 9 * * *'

permissions:
  contents: write


jobs:
  retrieve-oases:
    runs-on: ubuntu-latest
    steps:
      - name: Retrieve OASes from S3 bucket
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_DEV }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY_DEV }}
          AWS_DEFAULT_REGION: ${{ secrets.AWS_REGION }}
        run: |
          aws s3 cp s3://${{ secrets.APIX_DEV_S3_BUCKET_NAME }}/openapi/foas-metadata.json foas-metadata.json
          cat foas-metadata.json
